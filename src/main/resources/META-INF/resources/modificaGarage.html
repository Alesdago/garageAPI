<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Modifica Automobili</title>
<link rel="stylesheet" href="CSS/style.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script type="text/javascript">
	function modificaGarage() {
		var id = document.getElementById("modifica").elements[0].value;
		var marca = document.getElementById("modifica").elements[1].value;
		var modello = document.getElementById("modifica").elements[2].value;
		var colore = document.getElementById("modifica").elements[3].value;

		const data = {
			"colore" : colore,
			"modello" : modello,
			"marca" : marca,
			"id" : 0
		};

		$(document).ready(
				function() {
					$.ajax({
						url : 'garage/auto/' + id,
						type : 'PUT',
						data : JSON.stringify(data),
						contentType : 'application/json',
						success : function(data, textStatus, jqXHR) {
							$('#modificato').css('color', 'green');
							$('#modificato').text("Auto all'id (" + id + ") MODIFICATA CON SUCCESSO!");
							console.log(data);
						},
						error : function(jqXHR, textStatus, errorThrown) {
							console.log(textStatus);
						}
					});
				});

	}

	function modificaCampo() {
		var id = document.getElementById("modificaC").elements[0].value;
		var campo = document.getElementById("modificaC").elements[1].value;
		var parametro = document.getElementById("modificaC").elements[2].value;

		const data = [ id, campo, parametro ];

		$(document)
				.ready(
						function() {
							$
									.ajax({
										url : 'garage/auto/'
												+ id
												+ '/modifica-'
												+ campo
												+ '/' + parametro,
										type : 'PATCH',
										contentType : 'application/json',
										success : function(data, textStatus,
												jqHXR) {
											$('#campoModificato').css('color', 'green');
											$('#campoModificato').text("Campo ("+ campo + ") modificato con successo per l'auto con id (" + id + ")");
											console.log(textStatus);
										},
										error : function(jqXHR, textStatus,
												errorThrown) {
											console.log(textStatus);
										}
									});
						});

	}

	function menu() {
		var x = document.getElementById("myTopnav");
		if (x.className === "topnav") {
			x.className += " responsive";
		} else {
			x.className = "topnav";
		}
	}
</script>

</head>

<body>
	<div class="topnav" id="myTopnav">
		<a href="home.html"><i class="fas fa-home"></i> HOME</a> 
		<a href="gestioneGarage.html"><i class="fas fa-cog"></i> GESTISCI GARAGE</a> 
		<a href="ricerca.html"><i class="fas fa-search"></i> RICERCA AUTO</a> 
		<a href="modificaGarage.html" class="active"><i class="fas fa-wrench"></i> MODIFICA AUTO</a> 
		<a href="javascript:void(0);" class="icon" onclick="menu()"><i class="fa fa-bars"></i></a>
	</div>
	<div>
		<h1 align="center">MODIFICA &nbsp;AUTOMOBILI</h1>


		<div class="container">
			<div class="item">
				<h3>Modifica Garage <i class="fas fa-tools"></i></h3>
				<form id="modifica" onSubmit="return false;">
					<div class="row">
						<div>
							<input type="text" placeholder="Inserisci ID dell'auto" size="60" required="required" />
						</div>
					</div>
					<div class="row">
						<div>
							<input type="text" placeholder="Marca" size="60"
								required="required" />
						</div>
					</div>
					<div class="row">
						<div>
							<input type="text" placeholder="Modello" size="60"
								required="required" />
						</div>
					</div>
					<div class="row">
						<div>
							<input type="text" placeholder="Colore" size="60"
								required="required" />
						</div>
					</div>
					<br>
					<button class="bottone" type="reset">Reset <i class="fas fa-redo"></i></button>
					&nbsp;
					<input class="bottone" type="submit" value="Modifica" onclick="modificaGarage()" />

				</form>
				<div id="modificato"></div>
			</div>

			<div class="item">
				<h3>Modifica campo <i class="fas fa-wrench"></i></h3>
				<form id="modificaC" onSubmit="return false;">
					<div class="row">
						<div>
							<input type="text" placeholder="Id" size="60" />
						</div>
					</div>
					<div class="row">
						<div>
							<select name="campo">
								<option value="">Scegli il campo</option>
								<option value="marca">Marca</option>
								<option value="modello">Modello</option>
								<option value="colore">Colore</option>
							</select>
						</div>
					</div>
					<div class="row">
						<div>
							<input type="text" placeholder="Parametro" size="60" />
						</div>
					</div>
					<br>
					<button class="bottone" type="reset">Reset <i class="fas fa-redo"></i></button>
					&nbsp;
					<input class="bottone" type="submit" value="Modifica" onclick="modificaCampo()" />

				</form>
				<div id="campoModificato"></div>
			</div>
		</div>
	</div>
	
	<footer>
			<p><i>Alessandro D'Agostini - Adriana Ridolfi - Sarah Dari<br>2021 - <i class="far fa-copyright"> Copyright</i></i></p>
		</footer>
</body>
</html>